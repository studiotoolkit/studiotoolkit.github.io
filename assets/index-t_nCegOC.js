const l0=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4),R=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,.4166666666666667)-.055,x=t=>Math.max(0,Math.min(1,t)),C=(t,r,e)=>t+(r-t)*e,a0=Math.PI*2,Q0=({r:t,g:r,b:e})=>{const a=l0(t),n=l0(r),s=l0(e),o=Math.cbrt(.4122214708*a+.5363325363*n+.0514459929*s),c=Math.cbrt(.2119034982*a+.6806995451*n+.1073969566*s),h=Math.cbrt(.0883024619*a+.2817188376*n+.6299787005*s);return{L:.2104542553*o+.793617785*c-.0040720468*h,a:1.9779984951*o-2.428592205*c+.4505937099*h,b:.0259040371*o+.7827717662*c-.808675766*h}},R0=({L:t,a:r,b:e})=>{const a=t+.3963377774*r+.2158037573*e,n=t-.1055613458*r-.0638541728*e,s=t-.0894841775*r-1.291485548*e,o=a*a*a,c=n*n*n,h=s*s*s;return{r:x(R(4.0767416621*o-3.3077115913*c+.2309699292*h)),g:x(R(-1.2684380046*o+2.6097574011*c-.3413193965*h)),b:x(R(-.0041960863*o-.7034186147*c+1.707614701*h))}},_0=({L:t,a:r,b:e})=>({L:t,C:Math.sqrt(r*r+e*e),H:(Math.atan2(e,r)*180/Math.PI+360)%360}),tt=({L:t,C:r,H:e})=>({L:t,a:r*Math.cos(e*Math.PI/180),b:r*Math.sin(e*Math.PI/180)}),J0=t=>({r:parseInt(t.slice(1,3),16)/255,g:parseInt(t.slice(3,5),16)/255,b:parseInt(t.slice(5,7),16)/255}),h0=({r:t,g:r,b:e})=>{const a=n=>Math.round(n*255).toString(16).padStart(2,"0");return`#${a(t)}${a(r)}${a(e)}`},q=t=>_0(Q0(J0(t))),D=t=>h0(R0(tt(t))),rt=t=>h0(R0(t)),w0=(t,r,e)=>({L:C(t.L,r.L,e),a:C(t.a,r.a,e),b:C(t.b,r.b,e)}),U0=t=>{let r=t>>>0;return()=>{r+=1831565813;let e=r;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}},G0=t=>{let r=0;for(let e=1;e<7;e++)r=Math.imul(31,r)+parseInt(t[e],16)|0;return Math.abs(r)},u0=t=>{const r=[],e=U0(t);for(let n=0;n<256;n++)r.push(e());const a=n=>n*n*(3-2*n);return n=>{const s=Math.floor(n)&255,o=n-Math.floor(n);return C(r[s],r[s+1&255],a(o))}},i0=(t,r,e,a,n)=>{const s=1-n;return s*s*s*t+3*s*s*n*r+3*s*n*n*e+n*n*n*a},et=(t,r,e,a,n)=>({L:i0(t.L,r.L,e.L,a.L,n),a:i0(t.a,r.a,e.a,a.a,n),b:i0(t.b,t.b,e.b,a.b,n)}),at=t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,nt=t=>{let r;t>=1667&&t<=4e3?r=-266123900/(t*t*t)-234358/(t*t)+877.6956/t+.17991:r=-3025846900/(t*t*t)+21070379e-1/(t*t)+222.6347/t+.24039;let e;t>=1667&&t<=2222?e=-1.1063814*r*r*r-1.3481102*r*r+2.18555832*r-.20219683:t<=4e3?e=-.9549476*r*r*r-1.37418593*r*r+2.09137015*r-.16748867:e=3.081758*r*r*r-5.8733867*r*r+3.75112997*r-.37001483;const a=1,n=a*r/Math.max(e,1e-6),s=a*(1-r-e)/Math.max(e,1e-6),o=3.2406*n-1.5372*a-.4986*s,c=-.9689*n+1.8758*a+.0415*s,h=.0557*n-.204*a+1.057*s,l=Math.max(o,c,h,1e-6);return{r:x(R(o/l)),g:x(R(c/l)),b:x(R(h/l))}},st=(t,r=.5,e=-1.5,a=1.2,n=1)=>{const s=a0*(r/3+e*t),o=Math.pow(t,n),c=a*o*(1-o)/2,h=Math.cos(s),l=Math.sin(s);return{r:x(o+c*(-.14861*h+1.78277*l)),g:x(o+c*(-.29227*h-.90649*l)),b:x(o+c*(1.97294*h))}},ot=(t,r)=>{const e=U0(G0(t));return Array.from({length:r},()=>D({L:C(.35,.75,e()),C:C(.08,.2,e()),H:e()*360}))},ht=(t,r)=>{const e=q(t),a=137.50776405003785;return Array.from({length:r},(n,s)=>{const o=(e.H+a*s)%360;return D({L:C(.45,.7,s%3/2),C:Math.max(e.C,.1),H:o})})},ct=(t,r)=>{const e=q(t),a=G0(t),n=u0(a),s=u0(a+1),o=u0(a+2);return Array.from({length:r},(c,h)=>{const l=h/Math.max(r-1,1);return D({L:x(C(.35,.8,n(l*3.5))),C:x(C(.06,.22,s(l*4.1+1))),H:(e.H+o(l*2.7+2)*120-60)%360})})},lt=(t,r)=>{const e=q(t),a=20,n=220,s=(e.H-120+360)%360;return Array.from({length:r},(o,c)=>{const h=c/(r-1),l=(C(a,n,h)+s)%360,u=.35+.45*Math.sin(h*Math.PI),M=C(.18,.12,Math.abs(h-.5)*2);return D({L:u,C:M,H:l})})},ut=(t,r)=>{const e=t.slice(0,4).map(n=>Q0(J0(n)));for(;e.length<4;)e.push({...e[e.length-1]});const a={L:(e[0].L+e[3].L)/2,a:(e[0].a+e[3].a)/2,b:(e[0].b+e[3].b)/2};return e[1]=w0(e[1],a,.35),e[2]=w0(e[2],a,.35),Array.from({length:r},(n,s)=>{const o=s/(r-1);return rt(et(e[0],e[1],e[2],e[3],o))})},it=(t,r)=>{const e=q(t),a=.28,n=.88;return Array.from({length:r},(s,o)=>{const c=o/(r-1),h=at(c),l=C(a,n,h),u=e.C*(1-.4*Math.abs(c-.5)*2);return D({L:l,C:u,H:e.H})})},Mt=(t,r)=>{const e=q(t).H/360*3e3,a=Math.max(900,1500+e),n=Math.min(15e3,9e3+e);return Array.from({length:r},(s,o)=>{const c=o/(r-1),h=C(a,n,c);return h0(nt(h))})},mt=(t,r)=>{const e=q(t),a=[1,1];for(;a.length<r;)a.push(a[a.length-1]+a[a.length-2]);return Array.from({length:r},(n,s)=>{const o=(e.H+a[s]*47%360)%360,c=C(.4,.72,s%4/3),h=Math.max(e.C,.1);return D({L:c,C:h,H:o})})},gt=(t,r)=>{const e=q(t),a=.88,n=.28;return Array.from({length:r},(s,o)=>{const c=1/(o+1),h=1,l=1/r,u=(c-l)/(h-l),M=C(n,a,u),i=C(e.C*1.3,e.C*.5,u);return D({L:M,C:x(i),H:e.H})})},bt=(t,r)=>{const e=q(t);return Array.from({length:r},(a,n)=>{const s=n/Math.max(r-1,1),o=.55+.25*Math.sin(a0*s*1+0),c=e.C*(.7+.5*Math.sin(a0*s*1.5+Math.PI/3)),h=(e.H+60*Math.sin(a0*s*.75+Math.PI/6)+360)%360;return D({L:x(o),C:x(c),H:h})})},ft=(t,r)=>{const e=q(t).H/120%3;return Array.from({length:r},(a,n)=>{const s=n/(r-1);return h0(st(s,e,-1.5,1.2,1))})},ir=(t,r=5)=>{const e=t.square??[],a=e[0]??"#0065ff",n=e[1]??"#ff0000",s=e[2]??"#00ff00",o=e[3]??"#ffff00";return{random:ot(a,r),goldenRatio:ht(a,r),noise:ct(a,r),temperature:lt(a,r),bezierInterpolation:ut([a,n,s,o],r),easeInOut:it(a,r),blackbody:Mt(a,r),fibonacci:mt(a,r),harmonicSeries:gt(a,r),sinusoidal:bt(a,r),cubehelix:ft(a,r)}},k0=t=>({r:parseInt(t.slice(1,3),16)/255,g:parseInt(t.slice(3,5),16)/255,b:parseInt(t.slice(5,7),16)/255}),W=({r:t,g:r,b:e})=>{const a=n=>Math.max(0,Math.min(255,Math.round(n*255))).toString(16).padStart(2,"0");return`#${a(t)}${a(r)}${a(e)}`},S=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4),J=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,z=(t,r,e)=>t+(r-t)*e,I=(t,r=0,e=1)=>Math.max(r,Math.min(e,t)),T={r:1,g:1,b:1},F={r:0,g:0,b:0},$0=({r:t,g:r,b:e})=>.2126*S(t)+.7152*S(r)+.0722*S(e),w=(t,r)=>{const e=$0(t),a=$0(r);return(Math.max(e,a)+.05)/(Math.min(e,a)+.05)},pt=(t,r)=>{const e=({r:s,g:o,b:c})=>.2126729*Math.pow(s,2.4)+.7151522*Math.pow(o,2.4)+.072175*Math.pow(c,2.4);let a=e(t),n=e(r);if(a=a>.022?a:a+Math.pow(.022-a,1.414),n=n>.022?n:n+Math.pow(.022-n,1.414),Math.abs(n-a)<5e-4)return 0;if(n>a){const s=(Math.pow(n,.56)-Math.pow(a,.57))*1.14;return s<.1?0:(s-.027)*100}else{const s=(Math.pow(n,.65)-Math.pow(a,.62))*1.14;return s>-.1?0:(s+.027)*100}},K0=({r:t,g:r,b:e})=>{const a=Math.max(t,r,e),n=Math.min(t,r,e),s=(a+n)/2;if(a===n)return{h:0,s:0,l:s};const o=a-n,c=o/(s>.5?2-a-n:a+n);let h=0;return a===t?h=(r-e)/o+(r<e?6:0):a===r?h=(e-t)/o+2:h=(t-r)/o+4,{h:h*60,s:c,l:s}},H=({h:t,s:r,l:e})=>{const a=(1-Math.abs(2*e-1))*r,n=a*(1-Math.abs(t/60%2-1)),s=e-a/2;let o=0,c=0,h=0;return t<60?(o=a,c=n):t<120?(o=n,c=a):t<180?(c=a,h=n):t<240?(c=n,h=a):t<300?(o=n,h=a):(o=a,h=n),{r:o+s,g:c+s,b:h+s}},S0=(t,r,e,a=48)=>{if(w(t,r)>=e)return t;const n=K0(t);let s=null;{let o=0,c=n.l;for(let h=0;h<a;h++){const l=(o+c)/2,u=H({...n,l});w(u,r)>=e?(s=u,c=l):o=l}}if(s&&w(s,r)>=e)return s;{let o=n.l,c=1;for(let h=0;h<a;h++){const l=(o+c)/2,u=H({...n,l});w(u,r)>=e?(s=u,o=l):c=l}}return s&&w(s,r)>=e?s:w(F,r)>=w(T,r)?F:T},P0=(t,r,e,a,n,s,o=48)=>{let c=s==="dark"?0:e,h=s==="dark"?e:1,l=null;for(let u=0;u<o;u++){const M=(c+h)/2,i=H({h:t,s:r,l:M});w(i,a)>=n?(l=i,s==="dark"?c=M:h=M):s==="dark"?h=M:c=M}return l&&w(l,a)>=n?l:w(F,a)>=w(T,a)?F:T},v0=({r:t,g:r,b:e})=>{const a=S(t),n=S(r),s=S(e);return{r:J(I(.29031*a+.70969*n+0*s)),g:J(I(.29031*a+.70969*n+0*s)),b:J(I(-.02197*a+.02197*n+1*s))}},q0=({r:t,g:r,b:e})=>{const a=S(t),n=S(r),s=S(e);return{r:J(I(.10889*a+.89111*n+0*s)),g:J(I(.10889*a+.89111*n+0*s)),b:J(I(.00452*a-.00452*n+1*s))}},W0=(t,r)=>Math.sqrt((t.r-r.r)**2+(t.g-r.g)**2+(t.b-r.b)**2),Lt=(t,r,e=.12)=>W0(v0(t),v0(r))>e||W0(q0(t),q0(r))>e,Mr=(t,r=9)=>{const e=Object.values(t).find(o=>Array.isArray(o)&&o.length>0);if(!e)return{};const a=k0(e[0]),n=K0(a),s={};s.contrastScale=Array.from({length:r},(o,c)=>{const h=c/(r-1);return W(H({h:n.h,s:n.s,l:Math.pow(h,.8)}))});{const o=Math.ceil(r/2);s.accessible=Array.from({length:r},(c,h)=>{const l=h%2===0,u=l?z(.05,.35,h/2/o):z(.88,.98,Math.floor(h/2)/o),M=H({h:n.h,s:n.s*.6,l:u}),i=H(l?{h:n.h,s:n.s*.1,l:.96}:{h:n.h,s:n.s*.8,l:.15});return W(S0(M,i,4.5))})}{const o=[{bg:T,ratio:4.5,startL:.2},{bg:T,ratio:7,startL:.1},{bg:F,ratio:4.5,startL:.8},{bg:F,ratio:7,startL:.9}];s.wcag=Array.from({length:r},(c,h)=>{const{bg:l,ratio:u,startL:M}=o[h%o.length],i=Math.floor(h/o.length),m=I(1-i*.3),g=i*(M<.5?.08:-.08),b=H({h:n.h,s:n.s*m,l:I(M+g)});return W(S0(b,l,u))})}{const o={r:1,g:1,b:1};s.apca=Array.from({length:r},(c,h)=>{const l=h/(r-1),u=z(30,90,l);let M=0,i=1;for(let m=0;m<48;m++){const g=(M+i)/2,b=H({h:n.h,s:n.s,l:g});Math.abs(pt(b,o))>u?M=g:i=g}return W(H({h:n.h,s:n.s,l:(M+i)/2}))})}{const o=[202,27,56,180,291,343,120,240,30],c=[];for(let h=0;h<r;h++){const l=o[h%o.length],u=z(n.h,l,.65),M=z(.25,.75,h/Math.max(r-1,1));let i=H({h:u,s:I(n.s,.4,.85),l:M});h>0&&!Lt(i,k0(c[h-1]))&&(i=H({h:u,s:n.s,l:I(M+.15)})),c.push(W(i))}s.colorBlindSafe=c}{const o=[{name:"background",l:.97,s:.08},{name:"surface",l:.93,s:.12},{name:"border",l:.8,s:.18},{name:"muted",l:.65,s:.25},{name:"default",l:.45,s:n.s},{name:"emphasis",l:.35,s:n.s},{name:"strong",l:.22,s:n.s},{name:"onColor",l:.98,s:.05},{name:"error",l:.4,s:.85,h:0},{name:"success",l:.35,s:.6,h:142}];s.colorTokenized=Array.from({length:r},(c,h)=>{const{h:l,s:u,l:M}=o[h%o.length];return W(H({h:l??n.h,s:u,l:M}))})}{const o=Math.ceil(r/2),c=r-o;s.highContrast=Array.from({length:r},(h,l)=>{if(l<o){const u=l/Math.max(o-1,1),M=z(.05,.28,u),i=I(z(n.s,0,u),0,1);return W(P0(n.h,i,M,T,7,"dark"))}else{const u=(l-o)/Math.max(c-1,1),M=z(.65,.98,u),i=I(n.s*.7,.2,.8);return W(P0(n.h,i,M,F,7,"light"))}})}return s},M0=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4),m0=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,X=t=>Math.max(0,Math.min(1,t)),Y=(t,r,e)=>t+(r-t)*e,dt=({r:t,g:r,b:e})=>{const a=M0(t),n=M0(r),s=M0(e),o=Math.cbrt(.4122214708*a+.5363325363*n+.0514459929*s),c=Math.cbrt(.2119034982*a+.6806995451*n+.1073969566*s),h=Math.cbrt(.0883024619*a+.2817188376*n+.6299787005*s);return{L:.2104542553*o+.793617785*c-.0040720468*h,a:1.9779984951*o-2.428592205*c+.4505937099*h,b:.0259040371*o+.7827717662*c-.808675766*h}},Ct=({L:t,a:r,b:e})=>{const a=t+.3963377774*r+.2158037573*e,n=t-.1055613458*r-.0638541728*e,s=t-.0894841775*r-1.291485548*e,o=a*a*a,c=n*n*n,h=s*s*s;return{r:X(m0(4.0767416621*o-3.3077115913*c+.2309699292*h)),g:X(m0(-1.2684380046*o+2.6097574011*c-.3413193965*h)),b:X(m0(-.0041960863*o-.7034186147*c+1.707614701*h))}},xt=({L:t,a:r,b:e})=>({L:t,C:Math.sqrt(r*r+e*e),H:(Math.atan2(e,r)*180/Math.PI+360)%360}),yt=({L:t,C:r,H:e})=>({L:t,a:r*Math.cos(e*Math.PI/180),b:r*Math.sin(e*Math.PI/180)}),Ht=t=>({r:parseInt(t.slice(1,3),16)/255,g:parseInt(t.slice(3,5),16)/255,b:parseInt(t.slice(5,7),16)/255}),It=({r:t,g:r,b:e})=>{const a=n=>Math.round(n*255).toString(16).padStart(2,"0");return`#${a(t)}${a(r)}${a(e)}`},v=t=>xt(dt(Ht(t))),j=t=>It(Ct(yt(t))),A0=(t,r,e)=>{let a=r-t;return a>180&&(a-=360),a<-180&&(a+=360),(t+a*e+360)%360},y0=(t,r,e)=>({L:Y(t.L,r.L,e),C:Y(t.C,r.C,e),H:A0(t.H,r.H,e)}),At=(t,r)=>{const e=v(t);return Array.from({length:r},(a,n)=>{const s=n/(r-1);return j({L:Y(.92,.25,s),C:e.C,H:e.H})})},wt=(t,r,e)=>{const a=v(t),n=v(r),s={L:.9,C:.02,H:a.H};return Array.from({length:e},(o,c)=>{const h=c/(e-1),l=h*2;if(h<=.5){const u={...a,L:.4};return j(y0(u,s,l))}else{const u={...n,L:.4};return j(y0(s,u,l-1))}})},kt=(t,r)=>{const e=v(t),a=X(Y(.55,.65,.5)),n=Math.max(e.C,.12);return Array.from({length:r},(s,o)=>{const c=(e.H+360/r*o)%360;return j({L:a,C:n,H:c})})},$t=(t,r,e)=>{const a=v(t),n=v(r),s=[{L:.85,C:a.C*.5,H:a.H},{L:.45,C:a.C,H:a.H},{L:.85,C:n.C*.5,H:n.H},{L:.45,C:Math.max(a.C,n.C),H:A0(a.H,n.H,.5)}];return Array.from({length:e},(o,c)=>{const h=c/Math.max(e-1,1)*(s.length-1),l=Math.floor(h),u=Math.min(l+1,s.length-1);return j(y0(s[l],s[u],h-l))})},St=(t,r)=>{const e=v(t),a=X(e.L>.7?e.L:.62),n=Math.max(e.C,.12);return Array.from({length:r},(s,o)=>{const c=o/r,h=(e.H+360*c)%360;return j({L:a,C:n,H:h})})},Pt=(t,r)=>{const e=v(t),a=(e.H-30+360)%360,n=[0,30,60,120,180,240,280].map(c=>(c+a)%360),s=Math.max(e.C,.14),o=[.45,.6,.8,.72,.62,.5,.42];return Array.from({length:r},(c,h)=>{const l=h/(r-1)*(n.length-1),u=Math.floor(l),M=Math.min(u+1,n.length-1),i=l-u;return j({L:Y(o[u],o[M],i),C:s,H:A0(n[u],n[M],i)})})},vt=(t,r)=>{const e=v(t),a=.3,n=.88,s=(n-a)/r;return Array.from({length:r},(o,c)=>{const h=n-s*(c+.5);return j({L:h,C:e.C*.85,H:e.H})})},mr=(t,r=4)=>{const e=t.square??[],a=e[0]??"#0000ff",n=e[1]??"#ff0000",s=e[2]??"#00ff00";return{sequential:At(a,r),diverging:wt(a,s,r),qualitative:kt(a,r),bivariate:$t(a,n,r),cyclical:St(a,r),spectral:Pt(a,r),stepped:vt(a,r)}},qt=t=>{const r=parseInt(t.slice(1,3),16)/255,e=parseInt(t.slice(3,5),16)/255,a=parseInt(t.slice(5,7),16)/255,n=Math.max(r,e,a),s=Math.min(r,e,a);let o=0,c=0;const h=(n+s)/2;if(n!==s){const l=n-s;switch(c=h>.5?l/(2-n-s):l/(n+s),n){case r:o=(e-a)/l+(e<a?6:0);break;case e:o=(a-r)/l+2;break;case a:o=(r-e)/l+4;break}o/=6}return{h:o*360,s:c*100,l:h*100}},z0=({h:t,s:r,l:e})=>{const a=e/100,n=r/100*Math.min(a,1-a),s=o=>{const c=(o+t/30)%12,h=a-n*Math.max(Math.min(c-3,9-c,1),-1);return Math.round(255*h).toString(16).padStart(2,"0")};return`#${s(0)}${s(8)}${s(4)}`},L=(t,r)=>({...t,h:(t.h+r+360)%360}),gr=(t,r=9)=>{const e=Object.values(t).find(h=>Array.isArray(h)&&h.length>0);if(!e||e.length===0)return{};const a=e[0],n=qt(a),s={analogous:h=>[L(h,-30),h,L(h,30)],complementary:h=>[h,L(h,180)],splitComplementary:h=>[h,L(h,150),L(h,210)],triadic:h=>[h,L(h,120),L(h,240)],tetradic:h=>[h,L(h,60),L(h,180),L(h,240)],square:h=>[h,L(h,90),L(h,180),L(h,270)],accentedAnalogous:h=>[L(h,-30),h,L(h,30),L(h,180)],doubleSplitComplementary:h=>[h,L(h,30),L(h,150),L(h,210),L(h,180),L(h,240)],ambiguous:h=>[L(h,15),L(h,85),L(h,145)]},o={monochromatic:(h,l)=>Array.from({length:l},(u,M)=>({...h,l:Math.max(5,Math.min(95,15+70/(l-1||1)*M))})),monochromaticTintShade:(h,l)=>Array.from({length:l},(u,M)=>({...h,s:Math.max(0,h.s-M*2),l:Math.max(5,Math.min(95,10+80/(l-1||1)*M))}))},c={harmonyPalette:e};return Object.entries(s).forEach(([h,l])=>{c[h]=l(n).map(z0)}),Object.entries(o).forEach(([h,l])=>{c[h]=l(n,r).map(z0)}),c},g0=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4),b0=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,y=t=>Math.max(0,Math.min(1,t)),Wt=({r:t,g:r,b:e})=>{const a=g0(t),n=g0(r),s=g0(e),o=Math.cbrt(.4122214708*a+.5363325363*n+.0514459929*s),c=Math.cbrt(.2119034982*a+.6806995451*n+.1073969566*s),h=Math.cbrt(.0883024619*a+.2817188376*n+.6299787005*s);return{L:.2104542553*o+.793617785*c-.0040720468*h,a:1.9779984951*o-2.428592205*c+.4505937099*h,b:.0259040371*o+.7827717662*c-.808675766*h}},zt=({L:t,a:r,b:e})=>{const a=t+.3963377774*r+.2158037573*e,n=t-.1055613458*r-.0638541728*e,s=t-.0894841775*r-1.291485548*e,o=a*a*a,c=n*n*n,h=s*s*s;return{r:y(b0(4.0767416621*o-3.3077115913*c+.2309699292*h)),g:y(b0(-1.2684380046*o+2.6097574011*c-.3413193965*h)),b:y(b0(-.0041960863*o-.7034186147*c+1.707614701*h))}},Z=(t,r)=>(t.L-r.L)**2+(t.a-r.a)**2+(t.b-r.b)**2,B=t=>Math.sqrt(t.a*t.a+t.b*t.b),jt=t=>({r:parseInt(t.slice(1,3),16)/255,g:parseInt(t.slice(3,5),16)/255,b:parseInt(t.slice(5,7),16)/255}),n0=({r:t,g:r,b:e})=>{const a=n=>Math.round(n*255).toString(16).padStart(2,"0");return`#${a(t)}${a(r)}${a(e)}`},O=t=>n0(zt(t)),G=(t,r)=>{if(t.length>=r)return t.slice(0,r);const e=[...t],a=t[t.length-1]??{L:.5,a:0,b:0};for(;e.length<r;){const n=e.length/r;e.push({...a,L:y(.2+n*.6)})}return e},o0=(t,r)=>{if(t.length>=r)return t.slice(0,r);const e=[...t];for(;e.length<r;){const a=e.length/r;e.push({r:a,g:a,b:a})}return e},Dt=(t,r=6e3)=>{const e=Math.max(1,Math.floor(t.length/4/r)),a=[],n=[];for(let s=0;s<t.length;s+=4*e){if(t[s+3]<128)continue;const o={r:t[s]/255,g:t[s+1]/255,b:t[s+2]/255};a.push(o),n.push(Wt(o))}return{rgbs:a,labs:n}},Et=t=>{const r=new Uint8ClampedArray(t.length*800*4);let e=0;for(const a of t){const n=jt(a);for(let s=0;s<800;s++){const o=()=>(Math.random()-.5)*30;r[e++]=Math.round(y(n.r)*255+o()),r[e++]=Math.round(y(n.g)*255+o()),r[e++]=Math.round(y(n.b)*255+o()),r[e++]=255}}return r},c0=(t,r,e=25)=>{if(t.length===0)return[];const a=t.filter(l=>{const u=B(l);return Math.random()<=(u<.05?.2:u<.15?.6:1)}),n=a.length>=r?a:t,s=n.length,o=[n[Math.floor(Math.random()*s)]];for(let l=1;l<r;l++){const u=n.map(g=>Math.min(...o.map(b=>Z(g,b)))),M=u.reduce((g,b)=>g+b,0);let i=Math.random()*M,m=0;for(let g=0;g<s;g++)if(i-=u[g],i<=0){m=g;break}o.push({...n[m]})}const c=new Int32Array(s);for(let l=0;l<e;l++){let u=!1;for(let i=0;i<s;i++){let m=0,g=1/0;for(let b=0;b<r;b++){const k=Z(n[i],o[b]);k<g&&(g=k,m=b)}c[i]!==m&&(c[i]=m,u=!0)}if(!u)break;const M=Array.from({length:r},()=>({L:0,a:0,b:0,count:0}));for(let i=0;i<s;i++){const m=c[i];M[m].L+=n[i].L,M[m].a+=n[i].a,M[m].b+=n[i].b,M[m].count++}for(let i=0;i<r;i++)M[i].count>0&&(o[i]={L:M[i].L/M[i].count,a:M[i].a/M[i].count,b:M[i].b/M[i].count})}const h=new Array(r).fill(0);for(let l=0;l<s;l++)h[c[l]]++;return G(o.map((l,u)=>({lab:l,score:h[u]*(1+3*B(l))})).sort((l,u)=>u.score-l.score).map(l=>l.lab),r)},Ot=(t,r)=>{if(t.length===0)return o0([],r);const e=[{pixels:[...t]}],a=n=>{let s=1,o=0,c=1,h=0,l=1,u=0;for(const m of n.pixels)s=Math.min(s,m.r),o=Math.max(o,m.r),c=Math.min(c,m.g),h=Math.max(h,m.g),l=Math.min(l,m.b),u=Math.max(u,m.b);const M=o-s>=h-c&&o-s>=u-l?"r":h-c>=u-l?"g":"b";n.pixels.sort((m,g)=>m[M]-g[M]);const i=Math.floor(n.pixels.length/2);return[{pixels:n.pixels.slice(0,i)},{pixels:n.pixels.slice(i)}]};for(;e.length<r&&(e.sort((n,s)=>s.pixels.length-n.pixels.length),!(e[0].pixels.length<2));){const[n,s]=a(e.shift());e.push(n,s)}return o0(e.map(n=>{const s=n.pixels.length;return{r:n.pixels.reduce((o,c)=>o+c.r,0)/s,g:n.pixels.reduce((o,c)=>o+c.g,0)/s,b:n.pixels.reduce((o,c)=>o+c.b,0)/s}}),r)},Tt=(t,r)=>{const e=new Map;for(const a of t){const n=Math.round(a.r*7)/7,s=Math.round(a.g*7)/7,o=Math.round(a.b*7)/7,c=`${n},${s},${o}`,h=e.get(c);h?h.count++:e.set(c,{rgb:{r:n,g:s,b:o},count:1})}return o0(Array.from(e.values()).sort((a,n)=>n.count-a.count).slice(0,r).map(a=>a.rgb),r)},Ft=(t,r)=>{const e=t.filter(a=>B(a)>.1&&a.L>.25&&a.L<.85);return c0(e.length>=r?e:t,r)},Nt=(t,r)=>{const e=t.filter(a=>{const n=B(a);return n>=.02&&n<=.09&&a.L>.2&&a.L<.9});return c0(e.length>=r?e:t,r)},Bt=(t,r)=>{const e=()=>({r:0,g:0,b:0,count:0,children:new Array(8).fill(null),isLeaf:!1}),a=e(),n=(c,h,l,u,M)=>{if(M===8){c.isLeaf=!0,c.r+=h,c.g+=l,c.b+=u,c.count++;return}const i=7-M,m=(h>>i&1)<<2|(l>>i&1)<<1|u>>i&1;c.children[m]||(c.children[m]=e()),n(c.children[m],h,l,u,M+1)},s=c=>c.isLeaf&&c.count>0?[c]:c.children.filter(Boolean).flatMap(h=>s(h));for(const c of t)n(a,Math.round(c.r*255),Math.round(c.g*255),Math.round(c.b*255),0);let o=s(a);for(;o.length>r;)o.sort((c,h)=>c.count-h.count),o[0].count=0,o=s(a);return o0(o.filter(c=>c.count>0).sort((c,h)=>h.count-c.count).slice(0,r).map(c=>({r:y(c.r/c.count/255),g:y(c.g/c.count/255),b:y(c.b/c.count/255)})),r)},Qt=(t,r)=>{if(t.length===0)return G([],r);const e=t.length,a=t.reduce((i,m)=>i+m.L,0)/e,n=t.reduce((i,m)=>i+m.a,0)/e,s=t.reduce((i,m)=>i+m.b,0)/e,o=Math.sqrt(t.reduce((i,m)=>i+(m.L-a)**2,0)/e),c=Math.sqrt(t.reduce((i,m)=>i+(m.a-n)**2,0)/e),h=Math.sqrt(t.reduce((i,m)=>i+(m.b-s)**2,0)/e),l=Math.cbrt(t.reduce((i,m)=>i+(m.L-a)**3,0)/e),u=Math.cbrt(t.reduce((i,m)=>i+(m.a-n)**3,0)/e),M=Math.cbrt(t.reduce((i,m)=>i+(m.b-s)**3,0)/e);return Array.from({length:r},(i,m)=>{const g=r===1?0:m/(r-1)*2-1;return{L:y(a+g*o+(g*g-1/3)*l*.3),a:y(n+g*c+(g*g-1/3)*u*.3),b:y(s+g*h+(g*g-1/3)*M*.3)}})},Rt=(t,r)=>{if(t.length<r)return G(c0(t,t.length),r);const e=Array.from({length:r},(c,h)=>({...t[Math.floor(h/r*t.length)]})),a=.4,n=Math.min(t.length,4e3),s=Math.max(1,Math.floor(t.length/n));for(let c=0;c<n;c++){const h=t[c*s%t.length],l=a*(1-c/n);let u=0,M=1/0;for(let m=0;m<r;m++){const g=Z(h,e[m]);g<M&&(M=g,u=m)}const i=Math.max(1,Math.round(r/4*(1-c/n)));for(let m=0;m<r;m++){const g=Math.abs(m-u);if(g>i)continue;const b=l*Math.exp(-(g*g)/(2*i*i));e[m].L+=b*(h.L-e[m].L),e[m].a+=b*(h.a-e[m].a),e[m].b+=b*(h.b-e[m].b)}}const o=[];for(const c of e)o.some(h=>Z(h,c)<5e-4)||o.push(c);return G(o,r)},Jt=(t,r)=>{const e=Array.from({length:72},()=>({sumL:0,sumC:0,count:0}));for(const l of t){const u=(Math.atan2(l.b,l.a)*180/Math.PI+360)%360,M=Math.floor(u/(360/72))%72;e[M].sumL+=l.L,e[M].sumC+=B(l),e[M].count++}const a=e.map((l,u)=>({count:(e[(u-1+72)%72].count+e[u].count+e[(u+1)%72].count)/3,idx:u})),n=[];for(let l=0;l<72;l++)a[l].count>a[(l-1+72)%72].count&&a[l].count>=a[(l+1)%72].count&&e[l].count>0&&n.push(l);n.sort((l,u)=>a[u].count-a[l].count);const s=n.slice(0,r),o=[...a].sort((l,u)=>u.count-l.count);let c=0;for(;s.length<r&&c<72;)!s.includes(o[c].idx)&&e[o[c].idx].count>0&&s.push(o[c].idx),c++;let h=0;for(;s.length<r;)s.push(h),h+=Math.floor(72/r);return s.slice(0,r).map(l=>{const u=l/72*360+2.5,M=e[l].count>0?e[l].sumL/e[l].count:.5,i=e[l].count>0?e[l].sumC/e[l].count:.12,m=u*Math.PI/180;return{L:M,a:i*Math.cos(m),b:i*Math.sin(m)}})},Ut=(t,r)=>{if(t.length===0)return G([],r);const e=Math.max(1,Math.floor(t.length/2e3)),a=t.filter((s,o)=>o%e===0),n=[a.reduce((s,o)=>B(o)>B(s)?o:s)];for(;n.length<r;){let s=a[0],o=-1/0;for(const c of a){const h=n.reduce((l,u)=>Math.min(l,Z(c,u)),1/0);h>o&&(o=h,s=c)}if(o===0)break;n.push(s)}return G(n,r)},br=(t,r=6,e)=>{const a=Et(t.square??["#888888"]),{rgbs:n,labs:s}=Dt(a);if(s.length===0){const o=Array(r).fill("#000000");return{kmeans:o,medianCut:o,dominant:o,vibrant:o,muted:o,octree:o,colorMoments:o,neuralQuant:o,histogram:o,deltaE:o}}return{kmeans:c0(s,r).map(O),medianCut:Ot(n,r).map(n0),dominant:Tt(n,r).map(n0),vibrant:Ft(s,r).map(O),muted:Nt(s,r).map(O),octree:Bt(n,r).map(n0),colorMoments:Qt(s,r).map(O),neuralQuant:Rt(s,r).map(O),histogram:Jt(s,r).map(O),deltaE:Ut(s,r).map(O)}},f0=t=>{const r=parseInt(t.slice(1,3),16)/255,e=parseInt(t.slice(3,5),16)/255,a=parseInt(t.slice(5,7),16)/255;return{r,g:e,b:a}},Gt=({r:t,g:r,b:e})=>{const a=n=>Math.max(0,Math.min(255,Math.round(n*255))).toString(16).padStart(2,"0");return`#${a(t)}${a(r)}${a(e)}`},A=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4),P=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,d=(t,r,e)=>t+(r-t)*e,p0=(t,r,e)=>{const a=r-t,n=a>180?a-360:a<-180?a+360:a;return(t+n*e+360)%360},t0=t=>{const r=A(t.r),e=A(t.g),a=A(t.b),n=.4122*r+.5363*e+.0514*a,s=.2119*r+.6807*e+.1074*a,o=.0883*r+.2817*e+.63*a,c=Math.cbrt(n),h=Math.cbrt(s),l=Math.cbrt(o);return{L:.2104*c+.7936*h-.004*l,a:1.9779*c-2.4285*h+.4505*l,b:.0259*c+.7827*h-.8086*l}},j0=t=>{const r=t.L+.3963*t.a+.2158*t.b,e=t.L-.1055*t.a-.0638*t.b,a=t.L-.0894*t.a-1.2914*t.b,n=r*r*r,s=e*e*e,o=a*a*a,c=4.0767*n-3.3077*s+.2309*o,h=-1.2684*n+2.6097*s-.3413*o,l=-.0041*n-.7034*s+1.7076*o;return{r:P(c),g:P(h),b:P(l)}},r0=t=>{const r=A(t.r),e=A(t.g),a=A(t.b),n=(.4124*r+.3575*e+.1804*a)/.9504,s=.2126*r+.7151*e+.0721*a,o=(.0193*r+.1191*e+.9503*a)/1.0888,c=h=>h>.008856?Math.pow(h,1/3):7.787*h+16/116;return{L:116*c(s)-16,a:500*(c(n)-c(s)),b:200*(c(s)-c(o))}},D0=t=>{const r=(t.L+16)/116,e=t.a/500+r,a=r-t.b/200,n=M=>M>.20689?M*M*M:(M-16/116)/7.787,s=n(e)*.9504,o=n(r),c=n(a)*1.0888,h=3.2404*s-1.5371*o-.4985*c,l=-.9692*s+1.8759*o+.0415*c,u=.0556*s-.204*o+1.0572*c;return{r:P(h),g:P(l),b:P(u)}},E0=t=>{const r=Math.max(t.r,t.g,t.b),e=Math.min(t.r,t.g,t.b),a=r-e;let n=0;return a!==0&&(r===t.r?n=(t.g-t.b)/a+(t.g<t.b?6:0):r===t.g?n=(t.b-t.r)/a+2:n=(t.r-t.g)/a+4),{h:n*60,s:r===0?0:a/r,v:r}},Kt=({h:t,s:r,v:e})=>{const a=Math.floor(t/60)%6,n=t/60-a,s=e*(1-r),o=e*(1-n*r),c=e*(1-(1-n)*r);switch(a){case 0:return{r:e,g:c,b:s};case 1:return{r:o,g:e,b:s};case 2:return{r:s,g:e,b:c};case 3:return{r:s,g:o,b:e};case 4:return{r:c,g:s,b:e};default:return{r:e,g:s,b:o}}},fr=(t,r=9)=>{const e=Object.values(t).find(s=>Array.isArray(s));if(!e||e.length<1)return{};const a=e.length===1?[f0(e[0]),f0("#ffffff")]:e.map(f0),n={};return["lab","lch","oklab","oklch","hct","cam16","hsl","hsv","jzazbz","ipt"].forEach(s=>{const o=[];for(let c=0;c<r;c++){const h=c/(r-1)*(a.length-1),l=Math.min(Math.floor(h),a.length-2),u=h-l,M=a[l],i=a[l+1];let m;switch(s){case"oklab":{const g=t0(M),b=t0(i);m=j0({L:d(g.L,b.L,u),a:d(g.a,b.a,u),b:d(g.b,b.b,u)});break}case"oklch":{const g=t0(M),b=t0(i),k=Math.atan2(g.b,g.a)*180/Math.PI,E=Math.atan2(b.b,b.a)*180/Math.PI,Q=Math.sqrt(g.a**2+g.b**2),$=Math.sqrt(b.a**2+b.b**2),f=p0(k,E,u)*Math.PI/180,p=d(Q,$,u);m=j0({L:d(g.L,b.L,u),a:p*Math.cos(f),b:p*Math.sin(f)});break}case"lab":{const g=r0(M),b=r0(i);m=D0({L:d(g.L,b.L,u),a:d(g.a,b.a,u),b:d(g.b,b.b,u)});break}case"lch":{const g=r0(M),b=r0(i),k=Math.atan2(g.b,g.a)*180/Math.PI,E=Math.atan2(b.b,b.a)*180/Math.PI,Q=Math.sqrt(g.a**2+g.b**2),$=Math.sqrt(b.a**2+b.b**2),f=p0(k,E,u)*Math.PI/180,p=d(Q,$,u);m=D0({L:d(g.L,b.L,u),a:p*Math.cos(f),b:p*Math.sin(f)});break}case"hsl":case"hsv":{const g=E0(M),b=E0(i);m=Kt({h:p0(g.h,b.h,u),s:d(g.s,b.s,u),v:d(g.v,b.v,u)});break}case"ipt":case"jzazbz":case"cam16":case"hct":{m={r:P(d(A(M.r),A(i.r),u)),g:P(d(A(M.g),A(i.g),u)),b:P(d(A(M.b),A(i.b),u))};const g=Math.sin(Math.PI*u)*(s==="jzazbz"?.05:.02);m.r=Math.min(1,m.r+g);break}default:m={r:d(M.r,i.r,u),g:d(M.g,i.g,u),b:d(M.b,i.b,u)}}o.push(Gt(m))}n[s]=o}),n},L0=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4),d0=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,N=t=>Math.max(0,Math.min(1,t)),V0=(t,r,e)=>t+(r-t)*e,Vt=t=>({r:parseInt(t.slice(1,3),16)/255,g:parseInt(t.slice(3,5),16)/255,b:parseInt(t.slice(5,7),16)/255}),O0=({r:t,g:r,b:e})=>{const a=n=>Math.round(N(n)*255).toString(16).padStart(2,"0");return`#${a(t)}${a(r)}${a(e)}`},Xt=({r:t,g:r,b:e})=>{const a=L0(t),n=L0(r),s=L0(e),o=Math.cbrt(.4122214708*a+.5363325363*n+.0514459929*s),c=Math.cbrt(.2119034982*a+.6806995451*n+.1073969566*s),h=Math.cbrt(.0883024619*a+.2817188376*n+.6299787005*s);return{L:.2104542553*o+.793617785*c-.0040720468*h,a:1.9779984951*o-2.428592205*c+.4505937099*h,b:.0259040371*o+.7827717662*c-.808675766*h}},H0=({L:t,a:r,b:e})=>{const a=t+.3963377774*r+.2158037573*e,n=t-.1055613458*r-.0638541728*e,s=t-.0894841775*r-1.291485548*e,o=a*a*a,c=n*n*n,h=s*s*s;return{r:d0(4.0767416621*o-3.3077115913*c+.2309699292*h),g:d0(-1.2684380046*o+2.6097574011*c-.3413193965*h),b:d0(-.0041960863*o-.7034186147*c+1.707614701*h)}},T0=t=>{const{r,g:e,b:a}=H0(t);return{r:N(r),g:N(e),b:N(a)}},Yt=({L:t,a:r,b:e})=>({L:t,C:Math.sqrt(r*r+e*e),H:(Math.atan2(e,r)*180/Math.PI+360)%360}),e0=({L:t,C:r,H:e})=>({L:t,a:r*Math.cos(e*Math.PI/180),b:r*Math.sin(e*Math.PI/180)}),Zt=t=>Yt(Xt(Vt(t))),K=t=>{const r=s=>s.r>=-.001&&s.r<=1.001&&s.g>=-.001&&s.g<=1.001&&s.b>=-.001&&s.b<=1.001,e=H0(e0(t));if(r(e))return O0(T0(e0(t)));let a=0,n=t.C;for(let s=0;s<24;s++){const o=(a+n)/2;r(H0(e0({...t,C:o})))?a=o:n=o}return O0(T0(e0({...t,C:a})))},_t={harmonypalette:[0,150,210],analogous:[-30,0,30],complementary:[0,180],splitcomplementary:[0,150,210],triadic:[0,120,240],tetradic:[0,60,180,240],square:[0,90,180,270],accentedanalogous:[-30,0,30,180],doublesplitcomplementary:[0,30,150,180,210,330],ambiguous:[15,135,255]},tr=[{match:t=>t.includes("neutrallight")||t.includes("neutral")&&t.includes("light"),apply:t=>({...t,L:.93,C:Math.min(t.C*.08,.015)})},{match:t=>t.includes("neutraldark")||t.includes("neutral")&&t.includes("dark"),apply:t=>({...t,L:.1,C:Math.min(t.C*.08,.015)})},{match:t=>t.includes("neutral"),apply:t=>({...t,L:.55,C:Math.min(t.C*.06,.012)})},{match:t=>t.endsWith("shade")||t.includes("colorshade"),apply:t=>({...t,L:.3,C:t.C})},{match:t=>t.endsWith("dark"),apply:t=>({...t,L:.22,C:t.C})},{match:t=>t.endsWith("light")||t.endsWith("tint"),apply:t=>({...t,L:.88,C:t.C*.5})},{match:t=>t.startsWith("accent"),apply:t=>({...t,L:.62,C:Math.max(t.C,.22)})},{match:t=>t.startsWith("main")||t.startsWith("primary")||t.startsWith("brand"),apply:t=>({...t,L:.52,C:Math.max(t.C,.22)})},{match:t=>t.startsWith("background")||t.startsWith("bg"),apply:t=>({...t,L:.97,C:Math.min(t.C*.08,.012)})},{match:t=>t.startsWith("surface"),apply:t=>({...t,L:.91,C:Math.min(t.C*.18,.025)})},{match:t=>t.startsWith("foreground")||t.startsWith("text")||t.startsWith("on"),apply:t=>({...t,L:.18,C:Math.min(t.C*.12,.02)})}],rr=(t,r,e)=>{const a=t.toLowerCase().replace(/[^a-z]/g,"");if(e>1){if(a.includes("tintshade"))return F0(r,e);if(a.includes("monochromatic"))return nr(r,e);if(a.includes("tint")||a.includes("shade"))return F0(r,e);const n=_t[a];return n?er(r,n,e):ar(r,e)}for(const{match:n,apply:s}of tr)if(n(a))return[K(s(r))];return[K({...r,L:.55,C:Math.max(r.C,.18)})]},er=(t,r,e)=>Array.from({length:e},(a,n)=>{const s=r[n%r.length],o=Math.floor(n/r.length)*.08;return K({...t,L:N(t.L-o),H:(t.H+s+360)%360})}),ar=(t,r)=>Array.from({length:r},(e,a)=>K({...t,H:(t.H+360/r*a)%360})),nr=(t,r)=>Array.from({length:r},(e,a)=>{const n=a/Math.max(r-1,1),s=V0(.12,.94,n),o=t.C*N(1-Math.pow(Math.abs(n-.45),2.5));return K({L:s,C:o,H:t.H})}),F0=(t,r)=>Array.from({length:r},(e,a)=>{const n=a/Math.max(r-1,1),s=n<.5?.5*Math.pow(n*2,1.6):1-.5*Math.pow((1-n)*2,1.4),o=V0(.1,.96,s),c=t.C*N(1-Math.pow((n-.4)/.7,2)*.6);return K({L:o,C:c,H:t.H})}),sr=/^#[0-9a-fA-F]{6}$/,or=t=>{for(const r of t)if(sr.test(r))return r;return"#ff0000"},pr=t=>Object.fromEntries(Object.entries(t).map(([r,e])=>{const a=or(e),n=Zt(a);return[r,rr(r,n,e.length)]})),U=t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4,C0=t=>t<=.0031308?12.92*t:1.055*t**(1/2.4)-.055,s0=t=>t<0?0:t>1?1:t,hr=(t,r,e)=>{const a=U(t),n=U(r),s=U(e),o=Math.cbrt(.4122214708*a+.5363325363*n+.0514459929*s),c=Math.cbrt(.2119034982*a+.6806995451*n+.1073969566*s),h=Math.cbrt(.0883024619*a+.2817188376*n+.6299787005*s);return{L:.2104542553*o+.793617785*c-.0040720468*h,a:1.9779984951*o-2.428592205*c+.4505937099*h,b:.0259040371*o+.7827717662*c-.808675766*h}},cr=(t,r,e)=>{const a=t+.3963377774*r+.2158037573*e,n=t-.1055613458*r-.0638541728*e,s=t-.0894841775*r-1.291485548*e,o=a*a*a,c=n*n*n,h=s*s*s;return{r:s0(C0(4.0767416621*o-3.3077115913*c+.2309699292*h)),g:s0(C0(-1.2684380046*o+2.6097574011*c-.3413193965*h)),b:s0(C0(-.0041960863*o-.7034186147*c+1.707614701*h))}},X0=t=>{if(typeof t!="string")throw new TypeError(`Color must be a string, got ${typeof t}: ${JSON.stringify(t)}`);const r=t.trim().replace(/^#/,"").toLowerCase();if(/^[0-9a-f]{3}$/.test(r))return"#"+r[0]+r[0]+r[1]+r[1]+r[2]+r[2];if(/^[0-9a-f]{6}$/.test(r))return"#"+r;throw new RangeError(`Invalid hex color: "${t}" — expected "#rgb" or "#rrggbb"`)},Y0=t=>({r:parseInt(t.slice(1,3),16)/255,g:parseInt(t.slice(3,5),16)/255,b:parseInt(t.slice(5,7),16)/255}),lr=(t,r,e)=>{const a=n=>Math.round(s0(n)*255).toString(16).padStart(2,"0");return`#${a(t)}${a(r)}${a(e)}`},N0=t=>{const{r,g:e,b:a}=Y0(t),n=hr(r,e,a);return{L:n.L,C:Math.sqrt(n.a*n.a+n.b*n.b),H:(Math.atan2(n.b,n.a)*180/Math.PI+360)%360}},x0=(t,r,e)=>{const a=e*Math.PI/180,{r:n,g:s,b:o}=cr(t,r*Math.cos(a),r*Math.sin(a));return lr(n,s,o)},B0=(t,r)=>{const e=Math.abs(t-r)%360;return e>180?360-e:e},I0=(t,r)=>{const e=s=>{const{r:o,g:c,b:h}=Y0(X0(s));return .2126*U(o)+.7152*U(c)+.0722*U(h)},a=e(t),n=e(r);return(Math.max(a,n)+.05)/(Math.min(a,n)+.05)},ur=t=>I0(t,"#ffffff")>=I0(t,"#111111")?"#ffffff":"#111111";function Lr(t,r={}){if(!Array.isArray(t)||t.length===0)throw new TypeError("palette must be a non-empty array of hex color strings");const e={neutralChromaMax:r.neutralChromaMax??.06,mainLightnessMin:r.mainLightnessMin??.4,mainLightnessMax:r.mainLightnessMax??.72,shadeHueTolerance:r.shadeHueTolerance??30,accentHueMin:r.accentHueMin??100,derivedDarkL:r.derivedDarkL??.2,derivedDarkC:r.derivedDarkC??.035},a=t.map(f=>{const p=X0(f);return{hex:p,lch:N0(p)}}),n=a.filter(f=>f.lch.C<e.neutralChromaMax),s=(n.length>0?n:a).slice().sort((f,p)=>p.lch.L-f.lch.L)[0],o=a.filter(f=>f.lch.L>=e.mainLightnessMin&&f.lch.L<=e.mainLightnessMax),c=(o.length>0?o:a).slice().sort((f,p)=>p.lch.C-f.lch.C)[0],h=n.filter(f=>f.lch.L<.35&&f.hex!==s.hex);let l,u;h.length>0?(l=h.slice().sort((f,p)=>f.lch.L-p.lch.L)[0].hex,u=!1):(l=x0(e.derivedDarkL,e.derivedDarkC,c.lch.H),u=!0);const M=new Set([s.hex,c.hex]),i=a.filter(f=>!M.has(f.hex));let m,g=!1;if(i.length>0){const f=i.filter(p=>B0(p.lch.H,c.lch.H)<e.shadeHueTolerance&&p.lch.C>.1);m=(f.length>0?f:i).slice().sort((p,V)=>V.lch.C-p.lch.C)[0].hex}else m=x0(Math.max(.05,c.lch.L-.08),c.lch.C*.92,c.lch.H),g=!0;const b=new Set([s.hex,c.hex,m]),k=a.filter(f=>!b.has(f.hex));let E,Q=!1;if(k.length>0){const f=k.filter(p=>B0(p.lch.H,c.lch.H)>=e.accentHueMin);E=(f.length>0?f:k).slice().sort((p,V)=>V.lch.C-p.lch.C)[0].hex}else E=x0(.72,Math.min(c.lch.C,.18),(c.lch.H+150)%360),Q=!0;const $=(f,p,V,_,Z0=!1)=>({hex:_,role:f,label:p,weight:V,derived:Z0,lch:N0(_),textColor:ur(_),contrast:parseFloat(I0(_,s.hex).toFixed(2))});return{neutralLight:$("neutralLight","Neutral Light","60%",s.hex),neutralDark:$("neutralDark","Neutral Dark","—",l,u),mainColor:$("mainColor","Main Color","30%",c.hex),mainColorShade:$("mainColorShade","Main Color Shade","—",m,g),accentColor:$("accentColor","Accent Color","10%",E,Q)}}export{Lr as A,fr as L,Mr as M,mr as b,gr as d,ir as f,br as p,pr as x};
