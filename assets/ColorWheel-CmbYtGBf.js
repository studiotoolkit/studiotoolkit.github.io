import{r as t,j as ce}from"./index-Cpundhhs.js";const Ye=t.createContext({isDark:!1,setIsDark:()=>{}});function Qe(){return t.useContext(Ye)}const de={complementary:[0,180],analogous:[-30,0,30],monochromatic:[0],split:[0,150,-150],triadic:[0,120,240],square:[0,90,180,270],simple:[0]},Ue=[{name:"Harmony Mode",attribute:"harmony-mode",default:"split",show:!0,notes:""},{name:"Saturation",attribute:"saturation",default:100,show:!0,notes:""},{name:"Brightness",attribute:"brightness",default:50,show:!0,notes:""},{name:"Circle Radius",attribute:"circle-radius",default:1,show:!1,notes:"If not passed, default it is false"},{name:"Wheel Thickness",attribute:"wheel-thickness",default:80,show:!1,notes:"If not passed, default it is false"},{name:"Dot Size",attribute:"dot-size",default:5,show:!1,notes:"If not passed, default it is false"},{name:"Dot Position",attribute:"dot-position",default:"outer",show:!1,notes:"If not passed, default it is false"},{name:"Handle Thickness",attribute:"handle-thickness",default:2,show:!1,notes:"If not passed, default it is false"},{name:"Handle Color",attribute:"handle-color",default:"#000000",show:!1,notes:"If not passed, default it is false"},{name:"Show Harmony Polygon",attribute:"harmony-polygon",default:!1,show:!1,notes:"If not passed, default it is false"},{name:"Polygon Color",attribute:"polygon-color",default:"#000000",show:!1,notes:"If not passed, default it is false"},{name:"Polygon Thickness",attribute:"polygon-thickness",default:1,show:!1,notes:"If not passed, default it is false"},{name:"Center Dot",attribute:"center-dot",default:"#ffffff",show:!1,notes:"If not passed, default it is false"},{name:"Palette",attribute:"palette",default:null,show:!1,notes:"If not passed, default it is false"},{name:"Palette JSON",attribute:"palette-json",default:null,show:!1,notes:"If not passed, default it is false"}];function Fe({onColorsChange:z,harmonyMode:S,saturation:w,brightness:C,circleRadius:y,wheelThickness:p,dotSize:m,dotPosition:M,handleThickness:x,handleColor:E,harmonyPolygon:I,polygonColor:P,polygonThickness:v,centerDot:j,showCenterDot:Y=!1,borderColor:Q="#ffffff",canvasBackgroundColor:U="transparent",width:R=450,height:T=450}){const D=t.useRef(null),[he,q]=t.useState(!1),{isDark:K}=Qe(),l=e=>Ue.find(s=>s.attribute===e),[r,ye]=t.useState(S||l("harmony-mode").default),[B,pe]=t.useState(w??l("saturation").default),[H,me]=t.useState(C??l("brightness").default),F=t.useCallback(()=>{const e=l("circle-radius").default;if(y!==void 0)return y;if(e===1){const s=Math.min(R,T),a=p??l("wheel-thickness").default,o=m??l("dot-size").default;return s/2-a/2-o-10}return e},[R,T,y,p,m]),[g,ge]=t.useState(F()),[b,be]=t.useState(p??l("wheel-thickness").default),[V,ke]=t.useState(m??l("dot-size").default),[$,Se]=t.useState(M||l("dot-position").default),[Z,we]=t.useState(x??l("handle-thickness").default),[_,Ce]=t.useState(E||(l("handle-color").default==="black"?"#000000":l("handle-color").default)),[N,Me]=t.useState(I??l("harmony-polygon").default),[X,xe]=t.useState(P||(l("polygon-color").default==="black"?"#000000":l("polygon-color").default)),[L,Ee]=t.useState(v??l("polygon-thickness").default),[O,Ie]=t.useState(j||(l("center-dot").default==="white"?"#ffffff":l("center-dot").default)),[A,Pe]=t.useState(Y),[G,ve]=t.useState(Q),[k,je]=t.useState(U),[u,ee]=t.useState(0);t.useEffect(()=>{S!==void 0&&ye(S)},[S]),t.useEffect(()=>{w!==void 0&&pe(w)},[w]),t.useEffect(()=>{C!==void 0&&me(C)},[C]),t.useEffect(()=>{ge(y!==void 0?y:F())},[y,F]),t.useEffect(()=>{p!==void 0&&be(p)},[p]),t.useEffect(()=>{m!==void 0&&ke(m)},[m]),t.useEffect(()=>{M!==void 0&&Se(M)},[M]),t.useEffect(()=>{x!==void 0&&we(x)},[x]),t.useEffect(()=>{E!==void 0&&Ce(E)},[E]),t.useEffect(()=>{I!==void 0&&Me(I)},[I]),t.useEffect(()=>{P!==void 0&&xe(P)},[P]),t.useEffect(()=>{v!==void 0&&Ee(v)},[v]),t.useEffect(()=>{j!==void 0&&Ie(j)},[j]),t.useEffect(()=>{Pe(Y)},[Y]),t.useEffect(()=>{ve(Q)},[Q]),t.useEffect(()=>{je(U)},[U]);const n={x:R/2,y:T/2},J=e=>(e+360)%360,te=t.useCallback((e,s=B,a=H)=>`hsl(${e}, ${s}%, ${a}%)`,[B,H]),Re=(e,s,a)=>{s/=100,a/=100;const o=(1-Math.abs(2*a-1))*s,i=o*(1-Math.abs(e/60%2-1)),f=a-o/2;let c=0,d=0,h=0;return e<60?[c,d,h]=[o,i,0]:e<120?[c,d,h]=[i,o,0]:e<180?[c,d,h]=[0,o,i]:e<240?[c,d,h]=[0,i,o]:e<300?[c,d,h]=[i,0,o]:[c,d,h]=[o,0,i],{r:Math.round((c+f)*255),g:Math.round((d+f)*255),b:Math.round((h+f)*255)}},Te=(e,s,a)=>"#"+[e,s,a].map(o=>o.toString(16).padStart(2,"0")).join(""),se=t.useCallback(()=>$==="center"?g:$==="inner"?g-b/2:g+b/2,[$,g,b]),ae=t.useCallback(e=>{const s=(e-90)*Math.PI/180,a=se();return{x:n.x+a*Math.cos(s),y:n.y+a*Math.sin(s)}},[n.x,n.y,se]),oe=(e,s)=>{const a=e-n.x,o=s-n.y,i=Math.atan2(o,a)*180/Math.PI;return J(i+90)},le=t.useCallback(()=>{let e=[];r==="monochromatic"?e=[{h:u,l:30},{h:u,l:50},{h:u,l:70}]:e=de[r].map(a=>({h:J(u+a),l:H}));const s=e.map(a=>{const o=Re(a.h,B,a.l);return Te(o.r,o.g,o.b)});return{[r]:s}},[r,u,B,H]),ne=t.useCallback(e=>{for(let s=0;s<360;s++)e.beginPath(),e.strokeStyle=`hsl(${s},100%,50%)`,e.lineWidth=b,e.arc(n.x,n.y,g,(s-90)*Math.PI/180,(s-89)*Math.PI/180),e.stroke()},[n.x,n.y,g,b]),ie=t.useCallback((e,s)=>{!N||s.length<3||(e.beginPath(),e.moveTo(s[0].x,s[0].y),s.slice(1).forEach(a=>{e.lineTo(a.x,a.y)}),e.closePath(),e.strokeStyle=X,e.lineWidth=L,e.stroke())},[N,X,L]),fe=t.useCallback(e=>{if(r==="simple")return;const s=de[r],a=[];s.forEach(o=>{const i=J(u+o),f=ae(i);a.push(f),e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(f.x,f.y),e.strokeStyle=_,e.lineWidth=Z,e.stroke(),e.beginPath(),e.arc(f.x,f.y,V,0,Math.PI*2),e.fillStyle=te(i),e.fill(),e.strokeStyle="white",e.stroke()}),ie(e,a),A&&(e.beginPath(),e.arc(n.x,n.y,5,0,Math.PI*2),e.fillStyle=O,e.fill(),e.strokeStyle="white",e.lineWidth=1,e.stroke())},[r,u,n.x,n.y,V,Z,_,O,A,ae,te,ie]),re=t.useCallback(()=>{const e=D.current;if(!e)return;const s=e.getContext("2d");s&&(s.clearRect(0,0,e.width,e.height),k&&k!=="transparent"?(s.fillStyle=k,s.fillRect(0,0,e.width,e.height)):k==="transparent"&&(s.fillStyle=K?"#1a1a1a":"#ffffff",s.fillRect(0,0,e.width,e.height)),ne(s),fe(s),G&&(s.strokeStyle=G,s.lineWidth=1,s.strokeRect(0,0,e.width,e.height)))},[ne,fe,G,k,K]),De=()=>q(!0),Be=()=>q(!1),He=()=>q(!1),We=e=>{if(!he)return;const s=D.current;if(!s)return;const a=s.getBoundingClientRect(),o=oe(e.clientX-a.left,e.clientY-a.top);ee(o)},ze=e=>{const s=D.current;if(!s)return;const a=s.getBoundingClientRect(),o=oe(e.clientX-a.left,e.clientY-a.top);ee(o)};t.useEffect(()=>{re()},[re]);const W=t.useMemo(()=>le(),[le]);t.useEffect(()=>{z&&z(W)},[W,z]);const ue=t.useCallback(()=>W,[W]);return t.useEffect(()=>(window.getColorWheelPalette=ue,()=>{delete window.getColorWheelPalette}),[ue]),ce.jsx("div",{className:"color-wheel-container",children:ce.jsx("canvas",{ref:D,width:R,height:T,onMouseDown:De,onMouseUp:Be,onMouseLeave:He,onMouseMove:We,onClick:ze,style:{display:"block",margin:"0 auto",cursor:"pointer"}})})}export{Fe as Q};
